<h2>Term√©kek list√°ja</h2>
<h3 style="margin-bottom: 1rem; font-weight: normal; color: #555;">
  üì∏ Kattints a k√©pre a r√©szletek√©rt
</h3>

<app-product-filter
  [categories]="categories"
  [selectedCategory]="selectedCategory"
  [priceRange]="priceRange"
  [searchTerm]="searchTerm"
  (categoryChange)="onCategoryChange($event)"
  (priceRangeChange)="onPriceRangeChange($event)"
  (searchTermChange)="onSearchTermChange($event)"
  (applyFilters)="onApplyFilters()"
  (resetFilters)="onResetFilters()"
></app-product-filter>

<table mat-table [dataSource]="products" class="mat-elevation-z2" style="width: 100%;">

  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef> ID </th>
    <td mat-cell *matCellDef="let product"> {{ product.id }} </td>
  </ng-container>

  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> N√©v </th>
    <td mat-cell *matCellDef="let product"> {{ product.name }} </td>
  </ng-container>

  <ng-container matColumnDef="description">
    <th mat-header-cell *matHeaderCellDef> Le√≠r√°s </th>
    <td mat-cell *matCellDef="let product"> {{ product.description }} </td>
  </ng-container>

  <ng-container matColumnDef="price">
    <th mat-header-cell *matHeaderCellDef> √År (Ft) </th>
    <td mat-cell *matCellDef="let product"> {{ product.price | number }} Ft </td>
  </ng-container>

  <ng-container matColumnDef="imageUrl">
    <th mat-header-cell *matHeaderCellDef> K√©p </th>
    <td mat-cell *matCellDef="let product">
      <a *ngIf="!product.disabled; else disabledImg"
         [routerLink]="['/products', product.id]"
         style="display: inline-block; cursor: pointer;">
        <img [src]="product.imageUrl" alt="{{ product.name }}" width="80" />
      </a>
      <ng-template #disabledImg>
        <img [src]="product.imageUrl" alt="{{ product.name }}" width="80" style="opacity: 0.5; cursor: default;" />
      </ng-template>
    </td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef> M≈±velet </th>
    <td mat-cell *matCellDef="let product">
      <button mat-icon-button color="accent" (click)="addToCart(product)">
        <mat-icon>shopping_cart</mat-icon>
      </button>

      <ng-container *ngIf="isAdmin; else userView">
        <button mat-button color="warn" *ngIf="!product.disabled; else enableTpl" (click)="disableProduct(product)">
          Letilt√°s
        </button>
        <ng-template #enableTpl>
          <button mat-button color="primary" (click)="enableProduct(product)">
            Enged√©lyez√©s
          </button>
        </ng-template>
      </ng-container>

      <ng-template #userView></ng-template>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
